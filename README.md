## Байталоха Сергей, ИТ-1

---

## Задание.

Приложение баз данных «Компьютерный Клуб» позволит выдавать клиентам игровые станции для использования в своих целях и предназначено для автоматизации выполнения следующих операций:<br>
            ▪ бронирование игровых станций; <br>
            ▪ выдача игровых станций на время оплаты;<br>
	Приложение разрабатывается для следующих категорий пользователей:<br>
            ▪ сотрудники ресепшена (регистрация клиентов, продажа услуг, контроль очередей);<br>
            ▪ технического персонала (обслуживание станций);<br>
            ▪ Администрация (подсчет оплаченного времени за период).

## Алгоритм решения:

Приложение разработано с использованием фреймворка qt. Основная логика работы с бд описана в классе ClubManagement. В классе используются следующие методы:

connectToDb — устанавливает соединение с базой данных PostgreSQL. <br>
addUser — разбивает ФИО на части и добавляет нового пользователя в таблицу users.<br>
checkExists / checkUser — проверяют наличие пользователя в базе по email или номеру телефона.<br>
validateAndCheckUser — проводит комплексную проверку: валидность формата email, телефона, корректность ФИО и отсутствие дубликатов в БД.<br>
addStation — добавляет новую рабочую станцию (компьютер/консоль) в систему.<br>
deleteUser / deleteStation / deleteSession — удаляют соответствующие записи из базы данных по их ID.<br>
isTimeSlotFree — проверяет, не занята ли станция другими сессиями в указанный интервал времени.<br>
createBooking — бронирует станцию: проверяет её статус (не в ремонте ли она), свободное время и создает запись в транзакции.<br>
updateSessionStatus — обновляет статус сессии (например, переводит из «Бронь» в «Завершена»).<br>
toggleStationMaintenance — переключает статус станции между «Свободна» и «Ремонт».<br>
refreshUsers / refreshStations / refreshSessions — обновляют UI-модели данных для отображения актуальной информации в интерфейсе.<br>
generatePeriodReport — создает финансовый отчет в .txt, рассчитывая стоимость всех завершенных сессий за период (из расчета 2 руб/мин).<br>
generateStationLoadReport — формирует отчет по загруженности станций, вычисляя суммарное время их использования в минутах и сортируя по популярности.

Структура приложения построена на базе ApplicationWindow, внутри которого выделены следующие страницы: <br>
    1. «Подключение к БД»: Первичная настройка связи с сервером PostgreSQL, куда вводятся данные авторизации в базе данных (Host, DB Name, User, Password).<br>
    2. «Регистрация»: Регистрация новых клиентов клуба в системе. <br>
    3. «Станции»: Отображается список всех станций с их текущим статусом. Можно добавлять новые устройства или переводить существующие в режим «Ремонт», при котором блокируется бронирование станции.<br>
    4. «Сеансы»: Управление бронированием и активными игровыми сессиями. В верхней части расположен переключатель по статусам («Бронь», «Активна», «Завершена»). Форма позволяет создавать бронь на выбранное время, активировать её и завершать сеанс.<br>
    5. «Пользователи»: Представляет собой таблицу со списком всех зарегистрированных пользователей и возможностью удаления учетных записей.<br>
    6. «Отчёты»: Формирование аналитики и финансовой отчетности. Выбирается тип отчета и временной интервал. Результат выгружается в структурированный .txt файл.

В интерфейсе были использованы комбоксы. При создании брони выбор пользователя или станции осуществляется строго из списка существующих записей в БД. Это исключает ввод несуществующих ID и ошибки ручного ввода. Для таких полей, как «Тип устройства» (ПК/Консоль) или «Тип отчета», использование выпадающих списков гарантирует, что в логику бэкенда попадут только предусмотренные программой константы. Также тому, кто будет работать в программе, не потребуется помнить ID клиентов или  станций.
